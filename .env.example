# ==================================
# MONOGRAM - Environment Variables Template
# ==================================
# Copy this file to .env.local for development
# Never commit .env.local to version control
# ==================================

# ----------------------------------
# SUPABASE CONFIGURATION (Required)
# ----------------------------------
# Get these from: https://supabase.com/dashboard/project/_/settings/api
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here

# Service Role Key - NEVER expose to frontend, server-side only
# Used for admin operations, bypassing Row Level Security
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Database URL - for migrations and direct DB access
DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.your-project-id.supabase.co:5432/postgres

# Direct URL for Prisma (bypasses connection pooler for migrations)
DIRECT_URL=postgresql://postgres:[YOUR-PASSWORD]@db.your-project-id.supabase.co:5432/postgres

# ----------------------------------
# APPLICATION URLS
# ----------------------------------
# Base URL for your application (no trailing slash)
VITE_APP_URL=http://localhost:5173

# API base URL (if using separate backend)
VITE_API_BASE_URL=http://localhost:5173/api

# Production site URL (for OAuth redirects, email links)
NEXT_PUBLIC_SITE_URL=https://monogram.app

# ----------------------------------
# AUTHENTICATION & SECURITY
# ----------------------------------
# JWT Secret for additional token signing (optional, Supabase handles this)
JWT_SECRET=your-super-secret-jwt-key-min-32-chars

# CORS allowed origins (comma-separated for multiple origins)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Session cookie settings
SESSION_COOKIE_NAME=monogram_session
SESSION_MAX_AGE=604800

# ----------------------------------
# EMAIL SERVICE (Optional - Future)
# ----------------------------------
# Uncomment and configure when enabling email features

# Option 1: Resend (Recommended for transactional emails)
# EMAIL_SERVICE_PROVIDER=resend
# RESEND_API_KEY=re_your_api_key_here
# EMAIL_FROM=Monogram <noreply@monogram.app>

# Option 2: Postmark
# EMAIL_SERVICE_PROVIDER=postmark
# POSTMARK_SERVER_TOKEN=your-postmark-token
# EMAIL_FROM=noreply@monogram.app

# Option 3: SendGrid
# EMAIL_SERVICE_PROVIDER=sendgrid
# SENDGRID_API_KEY=your-sendgrid-key
# EMAIL_FROM=noreply@monogram.app

# Email templates
# WELCOME_EMAIL_TEMPLATE_ID=d-xxxxxxxx
# NEWSLETTER_TEMPLATE_ID=d-xxxxxxxx
# SPACE_INVITE_TEMPLATE_ID=d-xxxxxxxx

# ----------------------------------
# FILE STORAGE (Supabase Storage)
# ----------------------------------
# Supabase storage bucket names
VITE_STORAGE_BUCKET_AVATARS=avatars
VITE_STORAGE_BUCKET_EXPORTS=exports
VITE_STORAGE_BUCKET_BADGES=badges
VITE_STORAGE_BUCKET_PROMPT_IMAGES=prompt-images
VITE_STORAGE_BUCKET_RESPONSE_IMAGES=response-images

# Max file upload size (in bytes) - 5MB default
MAX_FILE_SIZE=5242880

# Allowed file types for avatars (comma-separated)
ALLOWED_AVATAR_TYPES=image/jpeg,image/png,image/webp,image/gif

# ----------------------------------
# SPOTIFY INTEGRATION
# ----------------------------------
# Get credentials from: https://developer.spotify.com/dashboard
# 
# Setup Instructions:
# 1. Go to https://developer.spotify.com/dashboard
# 2. Log in with your Spotify account
# 3. Click "Create app"
# 4. Fill in:
#    - App name: Monogram
#    - App description: Journaling app with music integration
#    - Redirect URI: http://localhost:3000/auth/spotify/callback (for dev)
#    - API/SDKs: Web API
# 5. Copy Client ID and Client Secret below
# 6. For production, add your production redirect URI to Spotify app settings
#
# Required Scopes (requested during OAuth):
# - user-read-currently-playing
# - user-read-playback-state
# - playlist-modify-public
# - playlist-modify-private

VITE_SPOTIFY_CLIENT_ID=your_spotify_client_id_here
VITE_SPOTIFY_CLIENT_SECRET=your_spotify_client_secret_here
VITE_SPOTIFY_REDIRECT_URI=http://localhost:3000/auth/spotify/callback

# For production, update to:
# VITE_SPOTIFY_REDIRECT_URI=https://yourdomain.com/auth/spotify/callback

# ----------------------------------
# ANALYTICS & MONITORING (Optional)
# ----------------------------------
# Plausible Analytics (privacy-friendly)
# VITE_PLAUSIBLE_DOMAIN=monogram.app
# VITE_PLAUSIBLE_API_HOST=https://plausible.io

# Sentry Error Tracking (Optional)
# VITE_SENTRY_DSN=https://your-sentry-dsn
# SENTRY_AUTH_TOKEN=your-sentry-auth-token
# SENTRY_ORG=your-org
# SENTRY_PROJECT=monogram

# ----------------------------------
# FEATURE FLAGS
# ----------------------------------
# Enable/disable features for testing
VITE_FEATURE_EMAIL_NOTIFICATIONS=false
VITE_FEATURE_ANALYTICS=false
VITE_FEATURE_FILE_UPLOADS=true
VITE_FEATURE_EXPORT_PDF=false
VITE_FEATURE_BADGES=false

# ----------------------------------
# RATE LIMITING & QUOTAS
# ----------------------------------
# Free tier limits (adjust based on plan)
MAX_SPACES_PER_USER=5
MAX_MEMBERS_PER_SPACE=12
MAX_RESPONSES_PER_WEEK=50
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# ----------------------------------
# APPLICATION SETTINGS
# ----------------------------------
# Environment mode
NODE_ENV=development

# Enable debug logging
VITE_DEBUG=false

# API request timeout (milliseconds)
API_TIMEOUT=30000

# Default timezone
TZ=UTC

# ----------------------------------
# DEVELOPMENT ONLY
# ----------------------------------
# Disable security features for local dev (NEVER in production)
DEV_DISABLE_CORS=false
DEV_MOCK_AUTH=false
DEV_SEED_DATABASE=false

# ==================================
# SUPABASE TABLES STRUCTURE (Reference)
# ==================================
# 
# Tables to create in Supabase:
# 
# 1. users (extends auth.users)
#    - id (uuid, primary key, references auth.users)
#    - name (text)
#    - email (text)
#    - avatar_url (text)
#    - role (text) - 'free', 'premium', 'admin'
#    - created_at (timestamp)
#    - updated_at (timestamp)
# 
# 2. spaces
#    - id (uuid, primary key)
#    - name (text)
#    - description (text)
#    - creator_id (uuid, references users)
#    - access_type (text) - 'Public', 'Private'
#    - current_week (integer)
#    - current_curator_id (uuid, references users)
#    - created_at (timestamp)
#    - updated_at (timestamp)
# 
# 3. memberships
#    - id (uuid, primary key)
#    - space_id (uuid, references spaces)
#    - user_id (uuid, references users)
#    - role (text) - 'member', 'curator', 'admin'
#    - joined_at (timestamp)
#    - UNIQUE(space_id, user_id)
# 
# 4. prompts
#    - id (uuid, primary key)
#    - space_id (uuid, references spaces)
#    - curator_id (uuid, references users)
#    - week_number (integer)
#    - title (text)
#    - content (text)
#    - created_at (timestamp)
# 
# 5. responses
#    - id (uuid, primary key)
#    - prompt_id (uuid, references prompts)
#    - user_id (uuid, references users)
#    - content (text)
#    - is_draft (boolean)
#    - created_at (timestamp)
#    - updated_at (timestamp)
# 
# 6. settings
#    - id (uuid, primary key)
#    - user_id (uuid, references users, unique)
#    - theme (text) - 'light', 'dark', 'system'
#    - email_notifications (boolean)
#    - landing_page (text) - 'dashboard', 'last-space'
#    - profile_visibility (text) - 'public', 'spaces', 'private'
#    - created_at (timestamp)
#    - updated_at (timestamp)
# 
# 7. badges (Optional - Future)
#    - id (uuid, primary key)
#    - name (text)
#    - description (text)
#    - icon_url (text)
#    - criteria (jsonb)
#    - created_at (timestamp)
# 
# 8. user_badges (Optional - Future)
#    - id (uuid, primary key)
#    - user_id (uuid, references users)
#    - badge_id (uuid, references badges)
#    - earned_at (timestamp)
#    - UNIQUE(user_id, badge_id)
# 
# ==================================
# ROW LEVEL SECURITY (RLS) POLICIES
# ==================================
# 
# Enable RLS on all tables and create policies:
# 
# users:
#   - SELECT: public (for member lists)
#   - INSERT/UPDATE: own user only
#   - DELETE: own user or admin
# 
# spaces:
#   - SELECT: public if 'Public', members only if 'Private'
#   - INSERT: authenticated users
#   - UPDATE: space creator or admin members
#   - DELETE: space creator only
# 
# memberships:
#   - SELECT: space members
#   - INSERT: space admin or invited user
#   - DELETE: own membership or space admin
# 
# prompts:
#   - SELECT: space members
#   - INSERT: current curator
#   - UPDATE: prompt creator
#   - DELETE: space creator
# 
# responses:
#   - SELECT: space members (own responses visible, others after submission)
#   - INSERT: space members
#   - UPDATE: response author
#   - DELETE: response author
# 
# settings:
#   - SELECT/UPDATE: own settings only
#   - INSERT: on user creation
# 
# ==================================
